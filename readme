Clinical Data Science – Final Assignment
One Year Survival Analysis of Sepsis Patients Gal Shlomo Ben David Ohayone
Abstract
In this work I am trying to reproduce the published study of Zhao et al. Zhao have shown that platelets count in sepsis patients can be a predictor for one year survival after admission at the ICU. The statistical analysis using MIMIC-III data. In this work we took into consideration the population demographic details, vital signs, Laboratory test results, calculated risk scores and some admission outcomes.
Introduction
Background
Sepsis is “life-threatening organ dysfunction caused by a dysregulated host response to
(Singer et al, 2016) When body's immune system repones to the infection is
or not effective enough, this incidence can lead to multi-organ failure, shock, and
death.
Objectives
Methods
Source of data
For the research we have used the MIMIC (Medical Information Mart for Intensive Care) Database, the same one that were used in the original research. This database include data of patients that have admitted to Intensive Care Unit of Beth Israel Care Unit in 2001 until 2012.
I have extracted the data using SQL with google Big Query platform and processed with python data science libraries using Google's Collaboratory online notebook. The MIMIC III database (version 1.4) is publicly available in https://mimic.physionet.org/ under filling the access requirements.
Participants
   infection”
  exaggerated
 Sepsis causes many deaths worldwide, with a very high (16.7 billion US dollars) cost of caring to those patients that suffer from this incidence. (Walkey et al, 2015) Those hospitalized partienents conservative estimated death rate reach 30%. (Reinhart et al, 2017)
 Zhao et al have created a Proportional hazards regression model, our goal is to create a logistic regression model that will outperform Zhao model, and will dill with some of its limitations. In our work we would like to be based on data that can be obtained within first 24 hours of ICU admission. We will validate our model with 10 folds cross-validation on train data (70%) and test our model on test data (30%).
    
 As explained above, The population in this research have admitted to Intensive Care Unit, therefore they can represent the whole population only partially.
Outcome
- One year survival –
I have extracted the date of death (DOD) for each patient (when available) and calculated the distance in time[days] from this admission. When DOD wasn’t available, I have assumed that the patients is still alive and fill the data cell with a 'very big number' in the terms of the problem (10,000). After that, I have screened the values to less than one year (0) and one year or more (1).
- Length of stay – in hours
- In hospital mortality (binary)
Predictors
- - - - - - - - -
Partial thromboplastin time (PTT) International normalized ratio (INR) Prothrombin time (PT)
White blood cell count (WBC)
Haemoglobin
Platelet
Blood urea nitrogen (BUN)
Creatinine (Cr) Spo2
For all of the above I have made an assumption that their mean value of lab test is the mean between their max value and their mean value of the first 24h of staying at the ICU.
- Sodium (minimal and maximal from first 24 hours of ICU stay)
- Potassium (minimal and maximal from first 24 hours of ICU stay)
- Glucose (minimal and maximal from first 24 hours of ICU stay)
For those 3 I have also calculated "mean"
- Admission type (Emergency, Elective, or Urgent) 2. Age Sex
Race (White, African American, Asian, or Others)
- Heart rate (HR)
Systolic blood pressure (SBP)
- Diastolic blood pressure (DBP)
- Respiratory rate (RR)
Temperature
2

- Glasgow coma scale (GCS) - 'GCS', 'GCSMotor', 'GCSVerbal', 'GCSEyes'
o (I have used more than one feature of GCS in order to try and improve results)
- Patients’ simplified acute physiology score (SAPSII)
- Sequential organ failure assessment (SOFA)
Sample size
There were 5152 admission that were taken into consideration, (I had another try with less restricted excluding rules and were able to create better model in some way)
Missing data
I have eliminated rows with missing data at the lab columns.
For censored data, like 'days untill death'– I have filled by myself as mention above.
Statistical analysis methods
I have used Kaplan-Meier curve in order to compare survival groups, I have created a logistics regression model in order to forecast one year survival.
Risk groups
blood platelets level ≥ 100 (×109 /L) and ≤300 (×109 /L) were considered Normal. (the final risk group were :Thrombocytosis, Normal, and Thrombocytopenia)
Development vs. validation
Results
Baseline patient characteristics and outcomes. I have painted the features that I believe that have big enough p-value in order to be correlated to our risk group.
3

                                                             n
GCS, mean (SD) GCSMotor, mean (SD)
962 13.6 (2.6) 5.2 (1.5)
3.3 (2.1)
3.1 (1.1) 46.4 (16.8)
0.4 (0.3) 87.0 (19.5)
9.0 (3.9) 1.0 (0.0)
0.9 (0.3)
0.7 (0.5) 0.2 (0.4)
0.6 (0.5)
0.3 (0.4)
0.1 (0.3)
382 (39.7) 580 (60.3) 59.5 (14.9) 17 (1.8) 84 (8.7) 178 (18.5) 682 (70.9)
900 (93.6) 33 (3.4) 252291.3 (28894.9)
2.0 (1.7) 144.1 (61.2) 9.8 (1.7)
62.8 (23.6) 44.4 (20.1)
39.7 (27.0) 10.8 (26.3)
3.7 (0.6)
4.5 (0.9) 135.7 (6.1) 139.6 (6.0) 36.8 (0.8) 37.6 (1.0) 35.9 (1.0) 21.0 (5.3)
0.3 (0.4)
1127 13.6 (2.6) 5.1 (1.6)
2.8 (2.2)
3.0 (1.1) 42.1 (15.0)
0.3 (0.3) 86.9 (18.3)
5.7 (3.0) 1.0 (0.0)
0.9 (0.3)
0.6 (0.5) 0.1 (0.2)
0.1 (0.3)
0.2 (0.4)
0.1 (0.3)
502 (44.5) 625 (55.5) 65.6 (14.5) 16 (1.4) 125 (11.1) 142 (12.6) 844 (74.9)
1060 (94.1) 27 (2.4)
248932.8 (28945.2)
2.0 (2.0) 149.1 (62.1) 10.0 (1.7)
413.8 (113.0) 39.5 (18.9)
35.0 (25.7) 17.4 (9.5)
3.8 (0.6)
4.7 (0.9) 136.0 (5.5) 139.6 (5.2) 36.9 (0.7) 37.7 (0.9) 36.1 (0.8) 20.5 (4.7)
0.2 (0.4)
GCSVerbal, mean (SD) GCSEyes, mean (SD) sapsii, mean (SD) sapsii_prob, mean (SD) HEART_RATE_HR, mean (SD)
SOFA, mean (SD) sepsis, mean (SD) organ_failure, mean (SD)
renal, mean (SD) hepatic, mean (SD) hematologic, mean (SD)
metabolic, mean (SD)
neurologic, mean (SD) SEX, n (%)
AGE, mean (SD) RACE, n (%)
icustay_id, mean (SD) CREATININE, mean (SD)
GLUCOSE, mean (SD) HEMOGLOBIN, mean (SD)
PLATELET, mean (SD) PTT, mean (SD)
BUN, mean (SD) WBC, mean (SD) POTASSIUM_min, mean (SD) POTASSIUM_max, mean (SD) SODIUM_min, mean (SD)
SODIUM_max, mean (SD)
tempc_mean, mean (SD)
tempc_max, mean (SD)
tempc_min, mean (SD)
resprate_mean, mean (SD)
RRT, mean (SD)
F M
ASIAN BLACK OTHER WHITE
EMERGENCY URGENT
Missing Overall
5152 28 13.5 (2.8) 86 5.0 (1.6)
71 2.9 (2.2)
44 3.0 (1.1) 0 43.6 (15.4)
0 0.3 (0.3) 910 85.6 (18.9)
0 6.8 (3.5) 0 1.0 (0.0)
0 0.9 (0.3)
0 0.7 (0.5) 0 0.1 (0.3)
0 0.2 (0.4) 0 0.2 (0.4) 0 0.1 (0.3) 0 2140 (41.5)
3012 (58.5) 0 64.5 (15.2)
0 119 (2.3) 574 (11.1) 751 (14.6)
3704 (71.9)
4816 (93.5) 137 (2.7)
Normal
3063 13.4 (2.9) 4.9 (1.7)
2.8 (2.2)
2.9 (1.2) 43.2 (14.9)
0.3 (0.3) 84.6 (18.8)
6.5 (3.2) 1.0 (0.0)
0.9 (0.3)
0.7 (0.5) 0.1 (0.3)
0.2 (0.4)
0.2 (0.4)
0.1 (0.3)
1256 (41.0) 1807 (59.0) 65.6 (15.1) 86 (2.8) 365 (11.9) 431 (14.1) 2178 (71.1)
2856 (93.2) 77 (2.5)
Thrombocytopeni Thrombocytosis a
P-Value
0.009 <0.001
<0.001
<0.001 <0.001
<0.001 0.001
<0.001 nan
<0.001
0.005 <0.001
<0.001 <0.001 0.256 0.053
<0.001 0.001
0.026
0.007 0.107 <0.001
<0.001 <0.001
<0.001 <0.001
<0.001 <0.001 0.006 <0.001 <0.001 0.001 <0.001 0.005
<0.001
Table 1
  Grouped by group
 SYSTOLIC_BLOOD_P RESSURE_SBP, mean (SD) DIASTOLIC_BLOOD_P RESSURE_DBP, mean (SD)
442 118.3 (33.7) 442 64.8 (34.7)
118.8 (34.0) 64.3 (32.6)
116.5 (42.0) 65.7 (37.3)
118.5 (23.2) 65.3 (37.7)
0.224 0.495
 respiratory, mean (SD) cardiovascular, mean (SD)
0 0.4 (0.5) 0.4 (0.5) 0.4 (0.5) 0.4 (0.5) 0.161 0 0.4 (0.5) 0.4 (0.5) 0.5 (0.5) 0.4 (0.5) 0.19
 ADMISSION_TYPE, n
(%) ELECTIVE
0 199 (3.9) 130 (4.2) 29 (3.0) 40 (3.5) 0.201
0 250229.4 (28903.8) 250058.8 (28866.5)
12 2.1 (2.0) 10 147.9 (62.0) 13 10.3 (1.8)
14 216.5 (134.1) 378 41.5 (19.9)
12 36.7 (25.5) 17 13.9 (14.0)
8 3.8 (0.6) 8 4.7 (1.0) 9 136.1 (5.5) 9 140.0 (5.4) 58 36.9 (0.8) 58 37.7 (1.0) 58 36.1 (0.9) 20 20.6 (4.7)
0 0.2 (0.4)
2.2 (2.1) 148.6 (62.3) 10.5 (1.8)
192.1 (54.6) 41.3 (20.0)
36.4 (24.9) 13.6 (8.4)
3.8 (0.6)
4.7 (1.0) 136.3 (5.4) 140.2 (5.2) 36.9 (0.8) 37.8 (1.0) 36.1 (0.9) 20.4 (4.6)
0.2 (0.4)
    INR, mean (SD) 351 1.8 (1.2) 1.8 (1.2) 1.8 (0.9) 1.8 (1.4) 0.264 PT, mean (SD) 350 17.9 (8.4) 17.8 (8.8) 18.3 (6.3) 17.8 (8.9) 0.245
 resprate_max, mean (SD)
resprate_min, mean (SD)
20 29.2 (7.5) 20 13.3 (4.2)
29.1 (7.3) 13.2 (4.1)
29.6 (8.2) 13.6 (4.4)
29.2 (7.3) 13.2 (4.3)
0.181 0.025
4

Survival analysis
  CoxPHFitter for the two main risk group. It is impossible to infer from this graph if a patients is
 having more chance to survive due to the fact that he have normal or abnormal blood platelents
 counts.
One year survival analysis
Table 2 – univariate and multivariate survivals analysis
I have colored the features that have the most statistical significance.
5

                                                           # Feature name Odds Ratio p-value
lower upper bound 95% bound 95%
0 ADMISSION_TYPE_ 0.95 0.50 ELECTIVE
1 ADMISSION_TYPE_ 1.06 0.34 EMERGENCY
2 ADMISSION_TYPE_ 0.94 0.50 URGENT
3 AGE 1.00 1.00
4 BUN 1.00 0.07
5 cardiovascular 1.17 0.00
6 CREATININE 1.00 0.48
7 DIASTOLIC_BLOOD 1.00 0.76
_PRESSURE_DBP
8 GCS 1.00 0.35
9 GCSEyes 0.99 0.25
10 GCSMotor 0.99 0.13
11 GCSVerbal 1.00 0.56
12 GLUCOSE 1.00 0.43
13 group_Normal 0.92 0.01
14 group_Thrombocytop 1.12 0.00
enia
15 group_Thrombocytos 1.01 0.73
is
16 HEART_RATE_HR 1.00 0.00
17 hematologic 1.12 0.00
18   HEMOGLOBIN 0.99 0.08   -0.03 0.00
Univariate analysis
Table2
  -0.19 0.09
-0.06 0.16
-0.23 0.11
0.00 0.00 0.00 0.00 0.10 0.21 -0.02 0.01
0.00 0.00
-0.01 0.01 -0.04 0.01 -0.03 0.00 -0.02 0.01 0.00 0.00 -0.13 -0.02
0.04 0.18
1.06 0.69
0.99 0.96
0.94 0.67
1.72 0.00 1.00 0.09 1.03 0.37 0.97 0.00
1.00 0.20
1.01 0.04 0.99 0.55 1.01 0.22 0.99 0.20 1.00 0.11 0.98 0.75
1.05 0.48
0.98 0.82
1.00 0.03
1.03 0.60 1.08 0.00 1.00 0.04 0.97 0.32 0.91 0.02 1.06 0.24 1.00 0.30 1.02 0.32 1.07 0.01 0.99 0.00 1.00 0.01 1.03 0.75 0.93 0.32
0.67 0.54 0.63 0.62
1.02 0.73
1.00 0.96
1.03 0.35 1.00 0.31 0.99 0.15 1.01 0.09 1.19 0.00 1.01 0.00 1.36 0.01 1.03 0.34 1.00 0.51 1.01 0.05 0.99 0.11
1.00 0.67
0.96 0.07 0.99 0.85 0.98 0.34 1.00 0.91
-0.21 0.32
-0.26 0.24
-0.34 0.22
0.46 0.63 0.00 0.00 -0.03 0.08 -0.05 -0.01
0.00 0.00
0.00 0.02 -0.04 0.02 -0.01 0.04 -0.03 0.01 0.00 0.00 -0.14 0.10
-0.09 0.18
-0.15 0.12
0.00 0.00
-0.07 0.12 0.04 0.11 0.00 0.00 -0.11 0.03 -0.18 -0.02 -0.04 0.16 0.00 0.00 -0.02 0.05 0.02 0.12 -0.01 0.00 0.00 0.00 -0.18 0.24 -0.22 0.07
-1.71 0.90 -2.30 1.38
-0.11 0.16
-0.07 0.07
-0.03 0.09 0.00 0.01 -0.02 0.00 0.00 0.01 0.10 0.26 0.00 0.01 0.08 0.54 -0.03 0.08 -0.01 0.01 0.00 0.01 -0.02 0.00
0.00 0.00
-0.09 0.00 -0.08 0.07 -0.07 0.02 0.00 0.00
Odds Ratio p-value
lower upper bound 95% bound 95%
Multivariate analysis
  -0.05 0.08
0.00 0.00 0.05 0.18
           19 hepatic 1.21 0.00
20 INR 1.02 0.13
21 LOS_IN_HOURS 1.00 0.25
22 metabolic 1.14 0.00
23 neurologic 1.18 0.00
24 organ_failure 1.15 0.00
25 PLATELET 1.00 0.17
26 POTASSIUM_max
27 POTASSIUM_min 1.02 0.37
28 PT 1.00 0.01
29 PTT 1.00 0.59
30 RACE_ASIAN 1.16 0.10
31 RACE_BLACK 0.99 0.73
32 RACE_CARIBBEAN_I 1.46 0.60
SLAND
RACE_HISPANIC_or
33 _LATINO_HONDURA 1.46 0.71
N
34 RACE_HISPANIC_or 1.46 0.71
_LATINO_MEXICAN
35 RACE_OTHER 1.02 0.61
36 RACE_WHITE 0.98 0.48
37 renal 1.11 0.00
38 respiratory 1.09 0.00
39 resprate_max 1.01 0.00
40 resprate_mean 1.01 0.00
41 resprate_min 1.00 0.81
42 RRT 1.08 0.03
43 sapsii 1.00 0.00
44 sapsii_prob 1.35 0.00
45 SEX_M 1.02 0.45
46 SODIUM_max 1.00 0.07
47 SODIUM_min 1.00 0.06
48 SOFA 1.02 0.00
49 SYSTOLIC_BLOOD_ 1.00 0.10
PRESSURE_SBP
50 tempc_max
51 tempc_mean 0.97 0.15
52 tempc_min 0.97 0.09
53 WBC 1.00 0.60
0.10 0.28 -0.01 0.04 0.00 0.00 0.06 0.20 0.09 0.25 0.06 0.23 0.00 0.00
-0.02 0.07 0.00 0.01 0.00 0.00 -0.03 0.33 -0.10 0.07
-1.01 1.76 -1.58 2.34
-1.58 2.34
-0.06 0.10 -0.08 0.04 0.04 0.16 0.03 0.14 0.00 0.01 0.01 0.02 -0.01 0.01 0.01 0.15 0.00 0.01 0.19 0.41 -0.03 0.08 -0.01 0.00 -0.01 0.00 0.02 0.03
0.00 0.00
-0.06 0.01 -0.06 0.00 0.00 0.00
1.00 0.77 -0.02 0.03
1.00 0.91 -0.07 0.06
0.97
0.00
-0.04
-0.01
     0.75 0.77 -2.14 1.57 1.02 0.82 -0.12 0.16
    1.00 1.00 -0.03 0.03
 6

Multivariate model – I have created a logistic regression model based on those features.
Multivariate Model discrimination
the model preform better than no skilled classifier but doesn’t outperform the original article model.
No Skill: ROC AUC=0.500 Logistic: ROC AUC=0.729
Multivariate Model calibration
As it is possible to see, the the model is quite calibrated when being divided into 7 beans, it is possible to see that the calculated risk is very similar to the real risk.
  7

Discussion
Limitations- the population was chosen under very limited criteria as mention above, it might be interesting to make the same research with bigger population. I have followed the instructions and haven’t increased the population group. I suggest that that problem of sepsis survival analysis can be defined with less restriction on the population clinical data, and maybe more defined on the demographic data.
It might be interesting to explore other features that appears in this database.
Interpretation- we have gotten some similar results in our bassline table, model performance and on the data analysis odds ratio – to the information that appears in the article.
Implications- I don’t think that my model will be more relevant than the one that appears in the article, but exploring the data was an instructive experience.
Bibliography
Reinhart K, Daniels R, Kissoon N, Machado FR, Schachter RD, Finfer SN Engl J Med. 2017 Aug 3; 377(5):414-417.
Singer M, Deutschman CS, Seymour CW, Shankar-Hari M, Annane D, Bauer M, Bellomo R, Bernard GR, Chiche JD, Coopersmith CM, Hotchkiss RS, Levy MM, Marshall JC, Martin GS, Opal SM, Rubenfeld GD, van der Poll T, Vincent JL, Angus DC JAMA. 2016 Feb 23; 315(8):801-10.
Walkey AJ, Lagu T, Lindenauer PK Ann Am Thorac Soc. 2015 Feb; 12(2):216-20. Those
  I am sorry but I didn’t manage to extract my python file as PDF. I have tried to do it in many different ways.
Here is a colab link:
https://colab.research.google.com/drive/1iYTBqcXe8eAJxkwKJ- hNoa9N2UJsXOwj?usp=sharing
another link (git): https://github.com/galbendavids/project1/blob/master/CDS_ex_final.ipynb
   8
